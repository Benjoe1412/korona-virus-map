(this["webpackJsonpkorona-virus-map"]=this["webpackJsonpkorona-virus-map"]||[]).push([[0],{146:function(e,t,n){},147:function(e,t,n){},349:function(e,t,n){"use strict";n.r(t);var c=n(0),o=n(36),r=n.n(o),a=(n(146),n(38)),i=n(30),s=(n(147),n(37)),u=n(141),l=n.n(u),d=n(1),b={strokeColor:"#f44336"},j={x:0,y:0},f={backgroundColor:"rgba(244,67,54,0.75)",color:"white",textAlign:"center",fontSize:"20px",padding:"32px 32px",borderTopLeftRadius:"100%",borderTopRightRadius:"100%",borderBottomRightRadius:"100%",transform:"translateY(-100%)",maxWidth:"200px"},h=Object(s.withScriptjs)(Object(s.withGoogleMap)((function(e){var t=Object(c.useRef)(null),n=Object(c.useState)(3),o=Object(i.a)(n,2),r=o[0],a=o[1],u=Object(c.useState)(null),h=Object(i.a)(u,2),O=h[0],g=h[1],p=Object(c.useCallback)((function(e){t.current=e}),[]),v=Object(c.useCallback)((function(){t.current&&a(t.current.getZoom())}),[]),m=Object(c.useCallback)((function(){t.current&&g(t.current.getBounds())}),[]);return Object(d.jsx)(s.GoogleMap,{ref:p,onZoomChanged:v,onBoundsChanged:m,defaultZoom:3,defaultCenter:{lat:47.1430185,lng:17.26265},children:e.locations.map((function(e){var t=e.id,n=e.coords,o=e.state,a=e.country,i=e.confirmed,u=e.deaths,h=e.recovered,g="".concat(o," ").concat(a).trim(),p=O&&O.contains(n),v=r>6&&p;return Object(d.jsxs)(c.Fragment,{children:[p&&i>0&&Object(d.jsx)(s.Circle,{center:n,radius:1e4*Math.log(i),options:b}),v&&(i>0||u>0||h>0)&&Object(d.jsx)(l.a,{position:n,labelAnchor:j,labelStyle:f,icon:" ",children:Object(d.jsxs)("div",{children:[Object(d.jsx)("span",{style:{fontSize:"1.2em",fontWeight:"bold"},children:g}),Object(d.jsx)("br",{}),Object(d.jsx)("br",{}),"Confirmed: ",i," ",Object(d.jsx)("br",{}),"Deaths: ",u,Object(d.jsx)("br",{}),"Recovered: ",h]})})]},t)}))})})));var O=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],o=t[1],r=Object(c.useState)([]),s=Object(i.a)(r,2),u=s[0],l=s[1];Object(c.useEffect)((function(){fetch("https://benjoe1412.github.io:8000/korona-virus-api/data").then((function(e){return e.json()})).then((function(e){var t={};e.forEach((function(e){var n="".concat(e.state," ").concat(e.country),c={lat:e.latitude,lng:e.longitude};t[n]?t[n]=Object(a.a)(Object(a.a)({},t[n]),{},{confirmed:t[n].confirmed+e.confirmed,deaths:t[n].deaths+e.deaths,recovered:t[n].recovered+e.recovered}):(t[n]=e,t[n].id=n,t[n].coords=c)}));var n=Object.values(t).filter((function(e){var t=e.latitude,n=e.longitude;return t&&n}));o(n)}))}),[]),Object(c.useEffect)((function(){fetch("https://benjoe1412.github.io:8000/korona-virus-api/time-series").then((function(e){return e.json()})).then((function(e){var t=Object.values(e).filter((function(e){var t=e.latitude,n=e.longitude;return t&&n}));l(t)}))}),[]);var b=Object(c.useState)(-1),j=Object(i.a)(b,2),f=j[0],O=j[1];Object(c.useEffect)((function(){f<0||o(u.map((function(e){return Object(a.a)(Object(a.a)({},e),{},{coords:{lat:e.latitude,lng:e.longitude},confirmed:e.confirmed[f],deaths:e.deaths[f],recovered:e.recovered[f]})})))}));var g=Object(c.useCallback)((function(){if(-1===f)var e=setInterval((function(){O((function(t){return t===u[0].confirmed.length-1?(clearInterval(e),-1):t+1}))}),10)}),[u,f]);return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)("button",{style:{padding:"8px 16px",position:"absolute",top:0,left:0,zIndex:1e4},onClick:g,children:"Play"}),Object(d.jsx)(h,{locations:n,googleMapURL:"https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=geometry,drawing,places",loadingElement:Object(d.jsx)("div",{style:{height:"100%"}}),containerElement:Object(d.jsx)("div",{style:{height:"100vh"}}),mapElement:Object(d.jsx)("div",{style:{height:"100%"}})})]})},g=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,350)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),o(e),r(e),a(e)}))};r.a.render(Object(d.jsx)(O,{}),document.getElementById("root")),g()}},[[349,1,2]]]);
//# sourceMappingURL=main.5be32dee.chunk.js.map